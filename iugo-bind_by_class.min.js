/* Author Chris Scott, MIT license */
$iugo.$internals.MVVC.prototype.initializers.push(function(a){a.innerHTML=a.innerHTML.replace(/(>[^><]*)\$\{([^.}]+)\.?([^}]*)\}([^><]*<)/g,'$1<span class="bindto-$2" data-bind_key="$3"></span>$4')}); $iugo.$internals.MVVC.prototype.defaultViewcontrollers.push(function(a,j,d){function g(f,e,a){if(f instanceof Array)for(var a=e.children.length,b=0;b<a;b++){var c;if(e.children[b].hasAttribute("data-bind_each")){c=e.children[b];0==f.length?(c.setAttribute("data-iugo_display",c.style.display),c.style.display="none"):c.style.display=c.getAttribute("data-iugo_display");for(var d=0;d<f.length;d++)1<=d&&(c=c.cloneNode(!0),c.className+=" iugo_cloned",e.appendChild(c)),g(f[d],c)}}else if(f instanceof Object){b= e.getAttribute("data-bind_key");null!=b&&""!=b&&(a=null==a?"":a+".",b=b.slice(a.length).split(".")[0],g(f[b],e,a+b));for(b=0;b<e.children.length;b++)g(f,e.children[b],a)}else"INPUT"==e.tagName?e.value=f:e.innerHTML=f}a=d.getElementsByClassName("bindto-"+a);for(d=0;d<a.length;d++){for(var h=a[d].getElementsByClassName("iugo_cloned"),k=h.length,i=0;i<k;i++)h[0].parentNode.removeChild(h[0]);g(j,a[d])}});