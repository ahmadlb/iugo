/* Author Chris Scott, MIT license */
$iugo.$internals.MVVC.prototype.initializers.push(function(a){for(var g=/(>[^<$]*)\$\{([^.}<]+)\.?([^}<]*)\}([^<]*<)/g;a.innerHTML.match(g);)a.innerHTML=a.innerHTML.replace(g,'$1<span class="bindto-$2" data-bind_key="$3"></span>$4')}); $iugo.$internals.MVVC.prototype.defaultViewcontrollers.push(function(a,g,d){function h(a,e,f){if(a instanceof Array)for(var f=e.children.length,b=0;b<f;b++){var c;if(e.children[b].hasAttribute("data-bind_each")){c=e.children[b];0==a.length?(c.setAttribute("data-iugo_display",c.style.display),c.style.display="none"):c.style.display=c.getAttribute("data-iugo_display");for(var d=0;d<a.length;d++)1<=d&&(c=c.cloneNode(!0),c.className+=" iugo_cloned",e.appendChild(c)),h(a[d],c)}}else if(a instanceof Object){b= e.getAttribute("data-bind_key");null!=b&&""!=b&&(f=null==f?"":f+".",b=b.slice(f.length).split(".")[0],h(a[b],e,f+b));for(b=0;b<e.children.length;b++)h(a,e.children[b],f)}else"INPUT"==e.tagName?e.value=a:e.innerHTML=a}a=d.getElementsByClassName("bindto-"+a);for(d=0;d<a.length;d++){for(var i=a[d].getElementsByClassName("iugo_cloned"),k=i.length,j=0;j<k;j++)i[0].parentNode.removeChild(i[0]);h(g,a[d])}});